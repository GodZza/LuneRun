# 动态轨道系统 - 快速入门

## 🎯 立即开始验证（3分钟）

### 步骤1：添加Debug UI（1分钟）
```
在Unity编辑器中：
1. 找到文件：Assets/Scripts/DynamicTrackDebugUI.cs
2. 在场景中创建空GameObject，命名为"DebugUI"
3. 将DynamicTrackDebugUI脚本拖拽到DebugUI上
4. 保存场景
```

### 步骤2：启动并观察（1分钟）
```
1. 点击Play按钮
2. 观察左上角的调试面板
3. 按住空格键让玩家跑动
4. 观察以下内容：
   - Player Position的Z值在增加 ✓
   - Current Segments在增长 ✓
   - 按L键查看统计 ✓
```

### 步骤3：验证动态功能（1分钟）
```
观察Console，应该看到：
[DynamicTrack] Player near end (distance=XXX)    ← 应该看到
[DynamicTrack] Loading segment #8              ← 应该看到
[DynamicTrack] Segment loaded, total segments=9   ← 应该看到

继续跑动，应该看到：
[DynamicTrack] Player far from start (distance=XXX)  ← 应该看到
[DynamicTrack] Removing segment type: Forward     ← 应该看到
[DynamicTrack] Segment removed, remaining segments=8 ← 应该看到
```

## ✅ 成功的标志

如果你看到以下现象，说明动态轨道系统正常工作：

- ✅ 玩家跑动时轨道段数量自动增加
- ✅ 轨道段数量保持在6-8个左右
- ✅ 没有红色的ERROR消息
- ✅ 左上角调试面板实时更新
- ✅ Console显示"Loading segment"和"Removing segment"消息

## 🔍 关键验证点

### 验证1：轨道是否无限延伸？
```
测试：按住空格键持续跑动2分钟
预期：轨道持续生成，玩家可以无限前进
如果：轨道用完了 → 轨道加载失败 ❌
```

### 验证2：段数量是否稳定？
```
测试：观察"Current Segments"数值
预期：保持在6-8个，不无限增长
如果：>15个 → 卸载失败 ❌
如果：<3个 → 加载失败 ❌
```

### 验证3：是否有多种段类型？
```
测试：观察"Last Segment Type"
预期：看到Forward、Hill、Curve等多种类型
如果：只有Forward → 生成器多样性失败 ❌
```

## 🎮 测试关卡建议

### 测试关卡1（入门）
```
难度：0.02（2%）
预期：主要是ForwardSegment，偶有HillSegment
验证：观察难度递增
```

### 测试关卡10（初级）
```
难度：0.20（20%）
预期：Forward + Hill + Curve混合
验证：生成器多样性
```

### 测试关卡25（中级）
```
难度：0.50（50%）
预期：所有类型混合，包括Hole、Island
验证：复杂地形
```

### 测试关卡50（专家）
```
难度：1.00（100%）
预期：所有生成器都能运行，包括Loop、LongJump
验证：完整功能
```

## ⌨️ Debug UI快捷键

### 键盘控制
```
[S] - 显示/隐藏调试UI
[T] - 切换详细日志模式
[L] - 打印完整统计到Console
```

### UI显示内容
```
DynamicTrack Debug UI
----------------------
Player Position:
  X: 玩家X坐标
  Y: 玩家Y坐标
  Z: 玩家Z坐标 ⬅ 重要！跑动时应该增长

Track Statistics:
  Current Segments: 当前段数（应该6-8）
  Last Segment Type: 最后生成的类型
  Load Forward: 6（配置值）
  Keep Backward: 2（配置值）

Key Commands:
  [S] - Show/Hide UI
  [T] - Toggle Debug Mode
  [L] - Print Statistics
```

## 📊 Console关键日志

### 成功初始化
```
✓ [DynamicTrack] Created with levelId=1, loadForward=6, keepBackward=2
✓ [DynamicTrack] Generating initial track with 8 segments, difficulty=0.02
✓ [DynamicTrack] Initialized 8 segment generators
✓ [Level] Set track to player and level with 8 segments
```

### 成功加载
```
✓ [DynamicTrack] Player near end (distance=180.50), should load more
✓ [DynamicTrack] Loading segment #8, difficulty=0.02
✓ [TrackGenerator] Generated Forward segment, total segments: 9
✓ [DynamicTrack] Segment loaded, total segments=9, total loaded=9
```

### 成功卸载
```
✓ [DynamicTrack] Player far from start (distance=350.20), should remove old segment
✓ [DynamicTrack] Removing segment type: ForwardSegment, total removed=1
✓ [DynamicTrack] Removing segment: XSegment, remaining before=9
✓ [DynamicTrack] Segment removed, remaining segments=8, total removed=1
```

## ⚠️ 常见警告（可以忽略）

### INFO级别消息
```
• 可简化 "new" 表达式 → 代码风格建议，可以忽略
• 如果未使用的参数 "settings" → 可以忽略
• 命名规则冲突 → 可以忽略
```

### HINT级别消息
```
• 可简化名称 → 可以忽略
• 不需要的 using 指令 → 可以忽略
• 未使用私有成员 → 可以忽略
```

## 🚨 ERROR级别（必须修复）

### 编译错误
```
✗ CS1503: cannot convert from 'int' to 'uint' → 必须修复
✗ CS1729: does not contain constructor → 必须修复
✗ CS7036: missing parameter → 必须修复
```

### 运行时错误
```
✗ NullReferenceException → 轨道未初始化
✗ IndexOutOfRangeException → 段数组访问错误
✗ MissingReferenceException → 生成器未正确添加
```

## ✨ 快速诊断

### 问题：不生成新轨道
```
检查清单：
□ Console显示"Player near end"吗？
□ 玩家Z坐标在增长吗？
□ _loadDistance = 200吗？
□ DynamicTrack.Update被调用吗？

解决方法：按[T]切换调试模式，查看详细日志
```

### 问题：不卸载旧轨道
```
检查清单：
□ Console显示"Player far from start"吗？
□ 玩家Z坐标 > 300吗？
□ _removeDistance = 300吗？
□ 段数量 > 8吗？

解决方法：减小_removeDistance到250
```

### 问题：只有ForwardSegment
```
检查清单：
□ 难度 > 0.1吗？
□ 其他生成器初始化了吗？
□ 随机数在变化吗？

解决方法：测试关卡10或更高
```

## 🎓 验证时间估算

| 任务 | 预计时间 |
|------|----------|
| 添加Debug UI | 1分钟 |
| 启动游戏 | 30秒 |
| 验证动态加载 | 2分钟 |
| 验证动态卸载 | 2分钟 |
| 测试多个关卡 | 3分钟 |
| 检查性能 | 2分钟 |
| **总计** | **~10分钟** |

## 📝 验证完成检查表

完成所有检查项后，在方框中打勾：

```
□ 编译成功（无ERROR）
□ 初始化日志正常
□ Debug UI正常显示
□ 玩家可以移动
□ 轨道动态加载
□ 轨道动态卸载
□ 段数量保持稳定（6-8个）
□ 至少看到3种段类型
□ Console显示"Loading segment"
□ Console显示"Removing segment"
□ 按L键可以看到统计
□ 无明显性能问题
□ 测试时长>5分钟
```

如果所有10项都打勾 → **验证通过！** ✅

如果有3项或以上未打勾 → **需要改进** ⚠️

---

**下一步验证通过后**：继续实现优先级2 - 完整的轨道生成器
